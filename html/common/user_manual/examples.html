

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>4. Examples &mdash; BRAILS 3.0.0 documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-main.c949a650a448cc0ae9fd3441c0e17fb0.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-bootstrap.5fd3999ee7762ccc51105388f4a9d115.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/panels-variables.06eb56fa6e07937060861dad626602ad.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/css/lightbox.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinxcontrib-images/LightBox2/lightbox2/dist/js/lightbox-plus-jquery.min.js"></script>
        <script src="../../_static/sphinxcontrib-images/LightBox2/lightbox2-customize/jquery-noconflict.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="5. Bugs &amp; Feature Requests" href="bugs.html" />
    <link rel="prev" title="3. Troubleshooting" href="troubleshooting.html" />
<script src="https://cdn.jsdelivr.net/npm/vega@5.12.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-lite@4.13.1"></script>
<script src="https://cdn.jsdelivr.net/npm/vega-embed@6.8.0"></script>
<style media="screen">.vega-actions a {margin-right: 5px;}</style>
<link href="../../_static/css/bootstrap.css" rel="stylesheet">

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #F2F2F2" >
          
<a href="https://simcenter.designsafe-ci.org/" style="margin-bottom: 0px;">
  <img src="../../_static/SimCenter_logo.png" class="logo" alt="Org-Logo" />
</a>
<hr style="margin: 0px;">

  <a href="../../index.html">


  <img src="../../_static/SimCenter_BRAILS_logo_solo.png" class="logo" alt="Logo"/>
</a>


  
  



<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>


        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/about.html">1. About</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/acknowledgements.html">2. Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/license.html">3. Copyright and License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/cite.html">4. How to Cite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/glossary.html">5. Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/abbreviations.html">6. Abbreviations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/releasenotes.html">7. Release Notes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">User Manual</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">1. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="userGuide.html">2. User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">3. Troubleshooting</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">4. Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#example-1-inventory-generator">4.1. Example 1: Inventory Generator</a></li>
<li class="toctree-l2"><a class="reference internal" href="#example-2-modules">4.2. Example 2: Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bugs.html">5. Bugs &amp; Feature Requests</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Technical Manual</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../technical_manual/theory.html">1. Theory and Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical_manual/vnv.html">2. Validation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../technical_manual/understand.html">3. Generalization</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">BRAILS</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">4. </span>Examples</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/common/user_manual/examples.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="examples">
<span id="lbl-examples"></span><h1><span class="section-number">4. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h1>
<div class="section" id="example-1-inventory-generator">
<h2><span class="section-number">4.1. </span>Example 1: Inventory Generator<a class="headerlink" href="#example-1-inventory-generator" title="Permalink to this headline">¶</a></h2>
<p>This code snippet shows you how to use BRAILS to generate a building inventory for a area. You provide the town, in this case Tiburon, CA, the number of buildings to sample from the town (remember it will start to cost you money to download images from Google), and a Google Maps API key. The code when it runs will print the inventory and also produce an inventory file, inventory.csv.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>
<span class="linenos"> 2</span><span class="kn">from</span> <span class="nn">brails.InventoryGenerator</span> <span class="kn">import</span> <span class="n">InventoryGenerator</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="c1"># Initialize InventoryGenerator:</span>
<span class="linenos"> 5</span><span class="n">invGenerator</span> <span class="o">=</span> <span class="n">InventoryGenerator</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="s1">&#39;San Rafael, CA&#39;</span><span class="p">,</span>
<span class="linenos"> 6</span>                                  <span class="n">nbldgs</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">randomSelection</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="linenos"> 7</span>                                  <span class="n">GoogleAPIKey</span><span class="o">=</span><span class="s2">&quot;PRIVIDE_YOUR_KEY&quot;</span><span class="p">)</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># Run InventoryGenerator to generate an inventory for the entered location:</span>
<span class="linenos">10</span><span class="c1"># To run InventoryGenerator for all enabled attributes set attributes=&#39;all&#39;:</span>
<span class="linenos">11</span><span class="n">invGenerator</span><span class="o">.</span><span class="n">generate</span><span class="p">(</span><span class="n">attributes</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;numstories&#39;</span><span class="p">,</span><span class="s1">&#39;roofshape&#39;</span><span class="p">,</span><span class="s1">&#39;buildingheight&#39;</span><span class="p">])</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="c1"># View generated inventory:</span>
<span class="linenos">14</span><span class="n">invGenerator</span><span class="o">.</span><span class="n">inventory</span>
</pre></div>
</div>
<p>The inventory.csv file will look something like the following:</p>
<div class="highlight-csv notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span>footprint,nstories,buildingheight,roofshape
<span class="linenos"> 2</span>&quot;POLYGON ((-122.5259147 37.9248895, -122.5258144 37.9248847, -122.5258197 37.9248163, -122.5258415 37.9248174, -122.5258465 37.9247523, -122.5259084 37.9247553, -122.5259072 37.9247703, -122.5259239 37.9247711, -122.5259147 37.9248895))&quot;,2,53.1,Flat
<span class="linenos"> 3</span>&quot;POLYGON ((-122.5307269 37.9267442, -122.5306426 37.9266658, -122.5305552 37.9267052, -122.5305798 37.9267415, -122.5304688 37.926789, -122.5305144 37.9268474, -122.5307269 37.9267442))&quot;,2,52.8,Hip
<span class="linenos"> 4</span>&quot;POLYGON ((-122.5283394 37.927182, -122.5283711 37.9273104, -122.5282511 37.9273288, -122.5282194 37.9272004, -122.5283394 37.927182))&quot;,1,33.3,Flat
<span class="linenos"> 5</span>&quot;POLYGON ((-122.5313485 37.9236359, -122.5314032 37.9235355, -122.5313854 37.9235295, -122.5314233 37.9234598, -122.5313427 37.9234325, -122.5313266 37.9234621, -122.5312801 37.9234464, -122.5312325 37.9235337, -122.5312816 37.9235503, -122.5312527 37.9236034, -122.5313485 37.9236359))&quot;,1,30.9,Gable
<span class="linenos"> 6</span>&quot;POLYGON ((-122.4995951 37.9230744, -122.4997138 37.9230726, -122.4997147 37.9231069, -122.4997812 37.9231059, -122.4997844 37.9232311, -122.4996727 37.9232328, -122.4996732 37.9232531, -122.4995879 37.9232544, -122.4995842 37.9231057, -122.4995959 37.9231055, -122.4995951 37.9230744))&quot;,1,26.2,Gable
<span class="linenos"> 7</span>&quot;POLYGON ((-122.4963758 37.9175472, -122.4963943 37.9175454, -122.4963881 37.9175066, -122.4964082 37.9175046, -122.4964121 37.9175289, -122.4964473 37.9175254, -122.4964431 37.9174995, -122.4964598 37.9174978, -122.4964653 37.9175318, -122.4965734 37.9175209, -122.4965892 37.9176185, -122.4965014 37.9176273, -122.4965027 37.9176355, -122.4963919 37.9176466, -122.4963758 37.9175472))&quot;,2,38.5,Flat
<span class="linenos"> 8</span>&quot;POLYGON ((-122.5291925 37.9290674, -122.5290991 37.9290669, -122.5291003 37.9289088, -122.5292526 37.9289095, -122.5292519 37.9290096, -122.5291929 37.9290093, -122.5291925 37.9290674))&quot;,2,43.4,Flat
<span class="linenos"> 9</span>&quot;POLYGON ((-122.5279392 37.9287362, -122.5279877 37.9287364, -122.5279873 37.9287949, -122.5279387 37.9287946, -122.5279392 37.9287362))&quot;,2,39.0,Flat
<span class="linenos">10</span>&quot;POLYGON ((-122.5150854 37.9209536, -122.515057 37.921094, -122.5149718 37.9210832, -122.5150003 37.9209429, -122.5150854 37.9209536))&quot;,,,Flat
<span class="linenos">11</span>&quot;POLYGON ((-122.5217461 37.9312052, -122.5216466 37.9313318, -122.5214937 37.931257, -122.5215329 37.9312072, -122.5215361 37.9312088, -122.521561 37.9311772, -122.5215984 37.9311955, -122.5216339 37.9311503, -122.5217461 37.9312052))&quot;,1,22.2,Gable
<span class="linenos">12</span>&quot;POLYGON ((-122.5254005 37.9251584, -122.525388 37.9252686, -122.5253828 37.9253305, -122.5253321 37.9253278, -122.5253375 37.9252645, -122.5252778 37.9252614, -122.525287 37.9251524, -122.5254005 37.9251584))&quot;,1,31.6,Flat
<span class="linenos">13</span>&quot;POLYGON ((-122.5067624 37.924188, -122.5069005 37.9242765, -122.5068342 37.9243409, -122.5068209 37.9243324, -122.506798 37.9243546, -122.5068118 37.9243635, -122.5067734 37.9244008, -122.5066786 37.9243401, -122.5067076 37.9243118, -122.5066638 37.9242837, -122.5067624 37.924188))&quot;,1,23.9,Hip
<span class="linenos">14</span>&quot;POLYGON ((-122.5150091 37.9137446, -122.5150217 37.9136759, -122.5151097 37.913686, -122.5150968 37.913756, -122.5150865 37.9137548, -122.5150807 37.9137865, -122.5150868 37.9137872, -122.5150735 37.9138595, -122.5150878 37.9138532, -122.5151033 37.9139078, -122.5150432 37.9139184, -122.5150502 37.913943, -122.5149661 37.9139579, -122.5149438 37.9138793, -122.5149764 37.9138735, -122.5149845 37.9138293, -122.5149776 37.9138286, -122.5149875 37.9137749, -122.5150088 37.9137773, -122.5150147 37.9137452, -122.5150091 37.9137446))&quot;,,,Flat
<span class="linenos">15</span>&quot;POLYGON ((-122.5274555 37.926461, -122.5274571 37.9264084, -122.5275856 37.9264108, -122.527584 37.9264634, -122.5274555 37.926461))&quot;,1,14.2,Flat
<span class="linenos">16</span>&quot;POLYGON ((-122.5212445 37.9240282, -122.5213399 37.9240409, -122.5213191 37.9241382, -122.52118 37.9241197, -122.5211853 37.9240949, -122.5211085 37.9240846, -122.5211072 37.9240906, -122.5210946 37.924089, -122.5211176 37.9239816, -122.5212208 37.9239953, -122.5212257 37.9239723, -122.521165 37.9239642, -122.5211833 37.9238785, -122.5212739 37.9238905, -122.5212445 37.9240282))&quot;,1,,Hip
<span class="linenos">17</span>&quot;POLYGON ((-122.5031352 37.9220763, -122.5030381 37.9222011, -122.5028842 37.9221265, -122.5029474 37.9220454, -122.5030316 37.9220862, -122.5030656 37.9220425, -122.5031352 37.9220763))&quot;,1,25.6,Gable
<span class="linenos">18</span>&quot;POLYGON ((-122.5071592 37.9172559, -122.5071412 37.9172602, -122.5071515 37.9172872, -122.5070883 37.9173021, -122.5071069 37.9173509, -122.5070041 37.9173752, -122.5069514 37.9172361, -122.5071352 37.9171927, -122.5071592 37.9172559))&quot;,2,57.2,Flat
<span class="linenos">19</span>&quot;POLYGON ((-122.5075481 37.9116629, -122.507522 37.9117253, -122.5074561 37.9117082, -122.5074537 37.9117139, -122.5073161 37.9116781, -122.507359 37.9115752, -122.5074534 37.9115997, -122.5074563 37.9115928, -122.5075032 37.911605, -122.5074957 37.9116228, -122.5075152 37.9116279, -122.5075052 37.9116518, -122.5075481 37.9116629))&quot;,1,,Flat
<span class="linenos">20</span>&quot;POLYGON ((-122.4960682 37.9191414, -122.4960501 37.9190614, -122.4960854 37.9190565, -122.4960674 37.9189768, -122.496099 37.9189723, -122.4961002 37.9189775, -122.4961823 37.918966, -122.4962157 37.9191135, -122.4961332 37.9191251, -122.4961348 37.919132, -122.4960682 37.9191414))&quot;,3,71.8,Flat
<span class="linenos">21</span>&quot;POLYGON ((-122.5331698 37.926004, -122.5330876 37.9258975, -122.5332387 37.9258248, -122.5332501 37.9258396, -122.5332788 37.9258258, -122.533282 37.92583, -122.5332858 37.9258282, -122.5333173 37.925869, -122.5333123 37.9258714, -122.5333147 37.9258746, -122.5332869 37.9258879, -122.5332972 37.9259013, -122.5332515 37.9259233, -122.5332748 37.9259535, -122.5331698 37.926004))&quot;,2,45.3,Gable
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>The code when it runs will place additional data in the tmp folder. Additional data will include the trained modules and images downloaded from the www. In the images folder it will download images for the roofshapes and place them in “tmp/images/satellite” folder, and other images for calculating the heights will bee placed placed in the “tmp/images/street folder”. These are required to run example 2.</p></li>
<li><p>You need to replace the text PROVIDE_YOUR_KEY with your oogle API key. The examples will fail otherwisee. Instructions on obtaining your Google API key can be found here: <a class="reference external" href="https://developers.google.com/maps/documentation/embed/get-api-key">https://developers.google.com/maps/documentation/embed/get-api-key</a>.</p></li>
</ol>
</div></blockquote>
<ol class="arabic simple" start="2">
<li><p>For the classifiers, it is important to pretrain with local data first to get decent results.</p></li>
</ol>
</div>
</div>
<div class="section" id="example-2-modules">
<h2><span class="section-number">4.2. </span>Example 2: Modules<a class="headerlink" href="#example-2-modules" title="Permalink to this headline">¶</a></h2>
<p>This second example will use specific modules within BRAILS to label a set of images. For this example it assumes images are located in the current folder in the “tmp/images/satellite” and “tmp/images/street”. If this example is run after running Example 1, it will use the images already there.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">import</span> <span class="nn">brails</span><span class="p">;</span>
<span class="linenos"> 2</span><span class="kn">import</span> <span class="nn">os</span><span class="p">;</span>
<span class="linenos"> 3</span><span class="kn">import</span> <span class="nn">glob</span><span class="p">;</span>
<span class="linenos"> 4</span>
<span class="linenos"> 5</span><span class="n">pwd</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="kn">from</span> <span class="nn">brails.modules</span> <span class="kn">import</span> <span class="n">PytorchRoofClassifier</span><span class="p">,</span> <span class="n">PytorchOccupancyClassifier</span>
<span class="linenos"> 8</span>
<span class="linenos"> 9</span><span class="c1"># initilize a roof classifier</span>
<span class="linenos">10</span><span class="n">roofModel</span> <span class="o">=</span> <span class="n">PytorchRoofClassifier</span><span class="p">()</span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="c1"># initilize an occupancy classifier</span>
<span class="linenos">13</span><span class="n">occupancyModel</span> <span class="o">=</span> <span class="n">PytorchOccupancyClassifier</span><span class="p">()</span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="c1"># use the roof classifier</span>
<span class="linenos">16</span><span class="n">imgs</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;tmp/images/satellite/*&#39;</span><span class="p">)</span>
<span class="linenos">17</span><span class="n">predictions</span> <span class="o">=</span> <span class="n">roofModel</span><span class="o">.</span><span class="n">predictMultipleImages</span><span class="p">(</span><span class="n">imgs</span><span class="p">)</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="c1"># use the occupancy classifier</span>
<span class="linenos">20</span><span class="n">imgs</span> <span class="o">=</span> <span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s1">&#39;tmp/images/street/*&#39;</span><span class="p">)</span>
<span class="linenos">21</span><span class="n">predictions</span> <span class="o">=</span> <span class="n">occupancyModel</span><span class="o">.</span><span class="n">predictMultipleImages</span><span class="p">(</span><span class="n">imgs</span><span class="p">)</span>
</pre></div>
</div>
<p>When the example runs, two files will be created containg the information deduced for each module.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<ol class="arabic simple">
<li><p>This example assumes images exist in the tmp/images/satellite and tmp/images/street folders. If you ran example 1, data will exist in these folders.</p></li>
<li><p>As for example 1, for the classifiers it is important to pretrain with local data first to get decent results.</p></li>
</ol>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="bugs.html" class="btn btn-neutral float-right" title="5. Bugs &amp; Feature Requests" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="troubleshooting.html" class="btn btn-neutral float-left" title="3. Troubleshooting" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2022, The Regents of the University of California.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 <script type="text/javascript">
    $(document).ready(function() {
        $(".toggle > *").hide();
        $(".toggle .header").show();
        $(".toggle .header").click(function() {
            $(this).parent().children().not(".header").toggle(400);
            $(this).parent().children(".header").toggleClass("open");
        })
    });
</script>


</body>
</html>