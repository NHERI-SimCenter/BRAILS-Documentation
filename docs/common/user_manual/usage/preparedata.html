<!DOCTYPE html>
<html >
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
      <title>3.1. Prepare and fuse data</title>
    
      <link rel="stylesheet" href="../../../_static/pygments.css">
      <link rel="stylesheet" href="../../../_static/theme.css">
      <link rel="stylesheet" href="../../../_static/sphinx_press_theme.css">
          <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
      
      <script type="text/javascript" id="documentation_options" data-url_root="../../../" src="../../../_static/documentation_options.js"></script>

      <!-- sphinx script_files -->
        <script type="text/javascript" src="../../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../../_static/language_data.js"></script>
        <script type="text/javascript" src="../../../_static/custom.js"></script>
        <script type="text/javascript" src="https://sidecar.gitter.im/dist/sidecar.v1.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>

      
      <script src="../../../_static/theme-vendors.js"></script>
      <script src="../../../_static/theme.js" defer></script>
    
  <link rel="index" title="Index" href="../../../genindex.html" />
  <link rel="search" title="Search" href="../../../search.html" />
  <link rel="next" title="3.2. Train your model" href="train.html" />
  <link rel="prev" title="3. Tutorial" href="tutorial.html" /> 
  </head>

  <body>
    <div id="app" class="theme-container" :class="pageClasses"><navbar @toggle-sidebar="toggleSidebar">
  <router-link to="../../../index.html" class="home-link">
    
      <img class="logo" src="../../../_static/SimCenter_BRAILS_logo.png" alt="doit logo"/>
    
  </router-link>

  <div class="links">
    <navlinks class="can-hide">

  
    <div class="nav-item">
      <a href="../../../index.html#what-is-brailsname"
         class="nav-link ">
         User Manual
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../../../index.html#what-is-brailsname"
         class="nav-link ">
         Technical Manual
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../../../index.html#what-is-brailsname"
         class="nav-link ">
         Developer Manual
      </a>
    </div>
  



    </navlinks>
  </div>
</navbar>

      
      <div class="sidebar-mask" @click="toggleSidebar(false)">
      </div>
        <sidebar @toggle-sidebar="toggleSidebar">
          
          <navlinks>
            

  
    <div class="nav-item">
      <a href="../../../index.html#what-is-brailsname"
         class="nav-link ">
         User Manual
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../../../index.html#what-is-brailsname"
         class="nav-link ">
         Technical Manual
      </a>
    </div>
  
    <div class="nav-item">
      <a href="../../../index.html#what-is-brailsname"
         class="nav-link ">
         Developer Manual
      </a>
    </div>
  



            
          </navlinks><div id="searchbox" class="searchbox" role="search">
  <div class="caption"><span class="caption-text">Quick search</span>
    <div class="searchformwrapper">
      <form class="search" action="../../../search.html" method="get">
        <input type="text" name="q" />
        <input type="submit" value="Search" />
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div><div class="sidebar-links" role="navigation" aria-label="main navigation">
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../../../index.html#what-is-brailsname">User Manual</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 "><a href="../../license.html" class="reference internal ">Copyright and license</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../installation/installation.html" class="reference internal ">Installation</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="tutorial.html" class="reference internal ">Tutorial</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../bugs.html" class="reference internal ">Bugs & Feauture Requests</a>

            
          </li>

        
      </ul>
    </div>
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../../../index.html#what-is-brailsname">Technical Manual</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 "><a href="../../technical_manual/theory.html" class="reference internal ">Theory and Implementation</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../../technical_manual/vnv.html" class="reference internal ">Verification and Validation</a>

            
          </li>

        
      </ul>
    </div>
  
    <div class="sidebar-group">
      <p class="caption">
        <span class="caption-text"><a href="../../../index.html#what-is-brailsname">Developer Manual</a></span>
      </p>
      <ul class="">
        
          <li class="toctree-l1 "><a href="../../developer_manual/how_to_extend/how_to_extend.html" class="reference internal ">How to Extend</a>

            
          </li>

        
          <li class="toctree-l1 "><a href="../../developer_manual/coding_style/coding_style.html" class="reference internal ">Coding Style</a>

            
          </li>

        
      </ul>
    </div>
  
</div>
          
        </sidebar>

      <page>
          <div class="body-header" role="navigation" aria-label="navigation">
  
  <ul class="breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
    
      <li><a href="tutorial.html"><span class="section-number">3. </span>Tutorial</a> &raquo;</li>
    
    <li><span class="section-number">3.1. </span>Prepare and fuse data</li>
  </ul>
  

  <ul class="page-nav">
  <li class="prev">
    <a href="tutorial.html"
       title="previous chapter">← <span class="section-number">3. </span>Tutorial</a>
  </li>
  <li class="next">
    <a href="train.html"
       title="next chapter"><span class="section-number">3.2. </span>Train your model →</a>
  </li>
</ul>
  
</div>
<hr>
          <div class="content" role="main">
            
  <div class="section" id="prepare-and-fuse-data">
<span id="lbl-preparedata"></span><h1><span class="section-number">3.1. </span>Prepare and fuse data<a class="headerlink" href="#prepare-and-fuse-data" title="Permalink to this headline">¶</a></h1>
<div class="section" id="get-google-map-api-key">
<h2>Get google map api key<a class="headerlink" href="#get-google-map-api-key" title="Permalink to this headline">¶</a></h2>
<p>Obtain the API key from <a class="reference external" href="https://developers.google.com/maps/documentation/embed/get-api-key">https://developers.google.com/maps/documentation/embed/get-api-key</a>.</p>
<p>Define api key in src/keys.py file like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">GoogleMapAPIKey</span> <span class="o">=</span> <span class="s2">&quot;replace this with your key&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="prepare-a-list-of-building-addresses-in-csv-format">
<h2>Prepare a list of building addresses in csv format<a class="headerlink" href="#prepare-a-list-of-building-addresses-in-csv-format" title="Permalink to this headline">¶</a></h2>
<p>For example, Atlantic_Cities_Addrs.csv looks like <a class="reference internal" href="#address-list"><span class="std std-numref">Fig. 3.1.1</span></a>.</p>
<div class="align-center figure" id="id2">
<span id="address-list"></span><img alt="../../../_images/addressList.png" src="../../../_images/addressList.png" />
<p class="caption"><span class="caption-number">Fig. 3.1.1 </span><span class="caption-text">Address list</span><a class="headerlink" href="#id2" title="Permalink to this image">¶</a></p>
</div>
<p>Noticing that, in addition to addresses, there are extra columns containing basic building information (e.g., stories, occupancy, etc.).
These basic information are scraped from tax websites.
It should be noted that, for a portion of these buildings, some building information may be missing from the websites.
In this case, just leave them blank in csv file.</p>
<p>Once <a class="reference external" href="https://berkeley.box.com/shared/static/hi0nzfykbadtczioj4tymrsjjgwahhbw.csv">Atlantic_Cities_Addrs.csv</a> is prepared, define the path of it in src/confiugre.py like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">cleanedBIMFileName</span> <span class="o">=</span> <span class="n">dataDir</span><span class="o">+</span><span class="s2">&quot;/Atlantic_Cities_Addrs.csv&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="prepare-a-boundary-file-of-the-region-of-interest-in-geojson-format">
<h2>Prepare a boundary file of the region of interest in geojson format<a class="headerlink" href="#prepare-a-boundary-file-of-the-region-of-interest-in-geojson-format" title="Permalink to this headline">¶</a></h2>
<p>Define the path in src/configure.py like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">RegionBoundaryFileName</span> <span class="o">=</span> <span class="n">dataDir</span><span class="o">+</span><span class="s2">&quot;/AtlanticCoastalCities_Boundary.geojson&quot;</span>
</pre></div>
</div>
<p>For this demo, we have prepared this boundary file for you, download from <a class="reference external" href="https://berkeley.box.com/shared/static/gfridzvcjo6k533554q9plh0g3v9fpzi.geojson">here</a>.</p>
</div>
<div class="section" id="prepare-building-footprints-in-geojson-format">
<h2>Prepare building footprints in geojson format<a class="headerlink" href="#prepare-building-footprints-in-geojson-format" title="Permalink to this headline">¶</a></h2>
<p>AI generated building footprints database -&gt; <a class="reference external" href="https://github.com/microsoft/USBuildingFootprints">USBuildingFootprints</a>.</p>
<p>We have prepared a cleaned version that just contains Atlantic coastal cities, download from <a class="reference external" href="https://berkeley.box.com/shared/static/0ueibjzbo1b0mgru4h6n8l2rmww8nx0z.geojson">here</a>.</p>
<p>Define the path of this footprints file in src/configure.py like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">BuildingFootPrintsFileName</span> <span class="o">=</span> <span class="n">dataDir</span><span class="o">+</span><span class="s2">&quot;/AtlanticCoastalCities_Footprints.geojson&quot;</span>
</pre></div>
</div>
</div>
<div class="section" id="geocode-buildings-and-create-a-basic-bim-file-for-this-region">
<h2>Geocode buildings and create a basic BIM file for this region.<a class="headerlink" href="#geocode-buildings-and-create-a-basic-bim-file-for-this-region" title="Permalink to this headline">¶</a></h2>
<p>Define the file path to store BIM for all buildings in src/configure.py like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">resultBIMFileName</span> <span class="o">=</span> <span class="n">dataDir</span><span class="o">+</span><span class="s2">&quot;/Atlantic_Cities_BIM.geojson&quot;</span>
</pre></div>
</div>
<p>Then run the following command from src/preparedata (This will cost $ because it calls Google API.
To avoid this, download the <a class="reference external" href="https://berkeley.box.com/shared/static/mb8dya89hslfj1eo8rzns2v6gllq4x68.zip">Atlantic geocoding file</a> and unzip it in your data/preparedata dir.
The code will first look into this dir for geocoding information, if it was not there, the code will call Google API.)</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>python geocoding_addr.py
</pre></div>
</div>
<p>This will create a BIM file Atlantic_Cities_BIM.geojson containing basic building information within the interested region.
The generated BIM file can be visulized in a GIS software, such as QGIS.</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>{
    &quot;type&quot;: &quot;FeatureCollection&quot;,
    &quot;features&quot;: [{
                    &quot;type&quot;: &quot;Feature&quot;,
                    &quot;id&quot;: &quot;8460&quot;,
                    &quot;properties&quot;: {
                            &quot;id&quot;: &quot;8460&quot;,
                            &quot;lat&quot;: 39.371879,
                            &quot;lon&quot;: -74.456126,
                            &quot;address&quot;: &quot;1970 W RIVERSIDE DR, ATLANTIC CITY,NJ&quot;,
                            &quot;stories&quot;: 2,
                            &quot;yearBuilt&quot;: 2006,
                            &quot;occupancy&quot;: &quot;Residential&quot;,
                            &quot;structureType&quot;: &quot;Frame&quot;,
                            &quot;buildingDescription&quot;: &quot;2SF&quot;,
                            &quot;city&quot;: &quot;ATLANTIC CITY CITY&quot;
                    },
                    &quot;geometry&quot;: {
                            &quot;type&quot;: &quot;Polygon&quot;,
                            &quot;coordinates&quot;: [
                                    [
                                            [-74.45606, 39.371837],
                                            [-74.455935, 39.371934],
                                            [-74.456037, 39.372013],
                                            [-74.456162, 39.371916],
                                            [-74.45606, 39.371837]
                                    ]
                            ]
                    }
            },
            {
                    &quot;type&quot;: &quot;Feature&quot;,
                    &quot;id&quot;: &quot;8461&quot;,
                    &quot;properties&quot;: {
                            &quot;id&quot;: &quot;8461&quot;,
                            &quot;lat&quot;: 39.3716807,
                            &quot;lon&quot;: -74.4513949,
                            &quot;address&quot;: &quot;1619 COLUMBIA AVE, ATLANTIC CITY,NJ&quot;,
                            &quot;stories&quot;: 2,
                            &quot;yearBuilt&quot;: 1979,
                            &quot;occupancy&quot;: &quot;Residential&quot;,
                            &quot;structureType&quot;: &quot;Frame&quot;,
                            &quot;buildingDescription&quot;: &quot;2SF&quot;,
                            &quot;city&quot;: &quot;ATLANTIC CITY CITY&quot;
                    },
                    &quot;geometry&quot;: {
                            &quot;type&quot;: &quot;Polygon&quot;,
                            &quot;coordinates&quot;: [
                                    [
                                            [-74.451353, 39.371717],
                                            [-74.451493, 39.371755],
                                            [-74.451526, 39.37168],
                                            [-74.451386, 39.371643],
                                            [-74.451353, 39.371717]
                                    ]
                            ]
                    }
            }
    ]
}
</pre></div>
</div>
</div>
</div>


          </div>
          <div class="page-nav">
            <div class="inner"><ul class="page-nav">
  <li class="prev">
    <a href="tutorial.html"
       title="previous chapter">← <span class="section-number">3. </span>Tutorial</a>
  </li>
  <li class="next">
    <a href="train.html"
       title="next chapter"><span class="section-number">3.2. </span>Train your model →</a>
  </li>
</ul><div class="footer" role="contentinfo">
      &#169; Copyright 2020, NHERI SimCenter.
    <br>
    Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.3.1 with <a href="https://github.com/schettino72/sphinx_press_theme">Press Theme</a>.

</div>


            </div>
          </div>
      </page>
    </div>
    
    
  </body>
</html>